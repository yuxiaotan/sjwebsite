<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="images/cloud" type="image/x-icon" />
<title>实验研究中心</title>

<!-- Bootstrap -->
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="css/styles.css" rel="stylesheet">
<link href="css/suggestions.css" rel="stylesheet">

</head>
<body>
  
<div id="includedContent"></div>
 

<!-- Actual Page -->
<div class="container mainpage">
 
  <div data-include="t_bigname.html"></div>

  <div class="row">

    <!--Side menu -->
    <div class="sidemenu col-md-2">
      <ul class="nav nav-pills nav-stacked">

        <li><a href="./faq.html"><span class="glyphicon glyphicon-envelope">
            信息查询</span></a></li>
        <li><a href="./downloads.html"><span class="glyphicon glyphicon-save">
            下载中心</span></a></li>
        <li><a href="./suggestions.html"><span class="glyphicon glyphicon-inbox">
            意见栏</span></a></li>
        <li><a href="./questions.html"><span class="glyphicon glyphicon-question-sign">
            疑问解答</span></a></li>
        <li ><a href="./contactus.html"><span class="glyphicon glyphicon-phone-alt">
            联系我们</span></a></li>
        <li><a href="./important.html"><span class="glyphicon glyphicon-transfer">
            重要链接</span></a></li>

      </ul>
    </div> <!-- Sidemenu col2 -->


    <div class="mainbody col-md-8 formsetting">
      <h3 class="suggestionheader">实验技术培训预约</h3>
      
      <form role="form">

            <div class="form-group namesize has-feedback" id="namecontactclass">
              <label for="inputnamecontact">姓名</label>
              <input type="name" class="form-control" id="inputnamecontact" placeholder="姓名"><span class="glyphicon" id="nameid"></span>
            </div>
            <div class="form-group namesize has-feedback" id="emailcontactclass">
              <label for="inputemailcontact">Email</label>
              <input type="email" class="form-control" id="inputemailcontact" placeholder="信箱邮件"><span id="emailid"></span>
            </div>

            <div class="form-group has-feedback suggestionsize" id="suggestioncontactclass">
              <label for="inputcontact">原因或目的（可以不填）</label>
              <textarea class="form-control" rows="5" id="inputcontact" placeholder="您需要预约培训课程的原因或目的"></textarea><span class="glyphicon pull-left" id="suggestionid"></span>
            </div>


            <button type="button" name="Submit" id="submitButton" class="btn btn-default">提交</button>
          </form>


          <!-- Form Validation --> 
          <div class="modal fade" id="submitvalidation" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h4 class="modal-title">您的信件发送成功！</h4>
                </div>
                <div class="modal-body">
                  您的培训预约已经发出！我们尽快给您一个回答！如果您几天内没有得到回答，请注意您的Email拼写。
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
              </div>
            </div>
          </div>
        </div> <!-- Mainbody Col10 -->
      </div>


















    </div><!--Container and Mainpage-->

    <div id="footer">
      <div class="container">
        <p class="text-muted">中国医科大学附属盛京医院实验研究中心 版权所有. 2014 <span class="glyphicon glyphicon-copyright-mark"></span>  </p>
      </div>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="script/csi.min.js"></script>
<script>

    var x="appointment";
    $("#includedContent").load("t_topbar.html");

</script>

    <script>


$('#submitButton').click(function() {



    var frm = $('#submitButton');
    var name = $("#inputnamecontact").val();
    var email = $("#inputemailcontact").val();
    var suggestion = $("#inputcontact").val();

    /* Doesn't pass Name Check */
    if(name == ""){

    //highlighting name
    document.getElementById("namecontactclass").className += " has-error has-feedback";
    //the special little check
    document.getElementById("nameid").className += " glyphicon glyphicon-remove form-control-feedback";



    }else

    {

      //remove red highlights
      document.getElementById("namecontactclass").className =
        document.getElementById("namecontactclass").className.replace
        ( /(?:^|\s)has-error(?!\S)/g , '' );

      //remove x
      document.getElementById("nameid").className =
        document.getElementById("nameid").className.replace
        ( /(?:^|\s)glyphicon-remove(?!\S)/g , '' );


      //the special little check
      document.getElementById("nameid").className += " glyphicon glyphicon-ok form-control-feedback";

      //green highlights
      document.getElementById("namecontactclass").className += " has-success";



      //checking for EMAIL problems
      if(email=="" || email==" " || (email.indexOf("@") === -1)){

        //highlighting name
        document.getElementById("emailcontactclass").className += " has-error has-feedback";
        //the special little check
        document.getElementById("emailid").className += " glyphicon glyphicon-remove form-control-feedback";


      }
      else
      {


        //remove red highlights
        document.getElementById("emailcontactclass").className =
          document.getElementById("emailcontactclass").className.replace
          ( /(?:^|\s)has-error(?!\S)/g , '' );

        //remove x
        document.getElementById("emailid").className =
          document.getElementById("emailid").className.replace
          ( /(?:^|\s)glyphicon-remove(?!\S)/g , '' );


        //the special little check
        document.getElementById("emailid").className += " glyphicon glyphicon-ok form-control-feedback";

        //green highlights
        document.getElementById("emailcontactclass").className += " has-success";



        {

          //remove red highlights
          document.getElementById("suggestioncontactclass").className =
            document.getElementById("suggestioncontactclass").className.replace
            ( /(?:^|\s)has-error(?!\S)/g , '' );

          //remove x
          document.getElementById("suggestionid").className =
            document.getElementById("suggestionid").className.replace
            ( /(?:^|\s)glyphicon-remove(?!\S)/g , '' );


          //the special little check
          document.getElementById("suggestionid").className += " glyphicon glyphicon-ok form-control-feedback";

          //green highlights
          document.getElementById("suggestioncontactclass").className += " has-success";



          console.log(suggestion);
          $('#submitvalidation').modal();

          $.ajax({
type: 'POST',
url: 'https://mandrillapp.com/api/1.0/messages/send.json',
data: {
"key": "J5M1v1vJ5MsIQANiEkHeww",
"message": {
"from_email": "sjwebemail@gmail.com",
"to": [
{
"email": "lab_center@163.com",
"name": "RECIPIENT NAME (OPTIONAL)",
"type": "to"
},

],
"autotext": "true",
"subject": "[实验技术培训预约] ".concat(name),
"html": name+"要求实验技术培训预约"+"<br><br> 姓名:"+name+"<br> Email:"+email+"<br> 原因:"+suggestion 
}
}
}).done(function(response) {
  console.log(response); // if you're into that sorta thing
  });



}

}
} 


});
    </script>

    </body>
    </html>

